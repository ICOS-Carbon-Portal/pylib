<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://icos-carbon-portal.github.io/pylib/icoscp/authentication/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Authentication - ICOS Carbon Portal icoscp Library</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Authentication";
        var mkdocs_page_input_path = "authentication.md";
        var mkdocs_page_url = "/pylib/icoscp/authentication/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ICOS Carbon Portal icoscp Library
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">About</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../install/">Installation</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Authentication</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#by-credentials-file-default">By credentials file (default)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#by-custom-credentials-file">By custom credentials file</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#by-authentication-token-prototyping">By authentication token (prototyping)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#by-explicit-credentials-advanced-option">By explicit credentials (advanced option)</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting_started/">Getting started with icoscp_core</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../examples/">Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../modules/">Legacy icoscp modules</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../legacy_examples/">Legacy icoscp examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ICOS Carbon Portal icoscp Library</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Authentication</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="authentication">Authentication</h1>
<p>To ensure users' licence acceptance when accessing data objects
through the <code>icoscp</code> Python library, authentication is required. Users
must either have ICOS Carbon Portal login credentials or
log in to Carbon Portal using another mechanism
<a href="https://cpauth.icos-cp.eu/login/">https://cpauth.icos-cp.eu/login/</a>
to obtain the token to access ICOS data.</p>
<p>Users also need to read and accept the ICOS Data Licence in their
<a href="https://cpauth.icos-cp.eu/">user profile</a>.</p>
<p><strong>Metadata-only access does not require authentication.</strong></p>
<p>Users with direct access to the data files,
namely, <strong>users of our <a href="https://www.icos-cp.eu/data-services/tools/jupyter-notebook">ICOS Jupyter services</a>, are
not required to configure authentication</strong>.</p>
<p>In order to fetch data, users make their requests to data objects and
must provide an API token to do so. For security reasons the API token is
valid for 100'000 seconds (27 hours) and may therefore need to be refreshed;
this process is automated when using credentials-based authentication (see
below).</p>
<p>Authentication can be initialized in a number of ways. <strong>Please note</strong> that
when using other approaches than the default one (see below), it becomes
necessary to use the <code>data</code> value (instance of <code>DataClient</code> class) obtained
in the process of authentication bootstrap, rather than the default instance
obtained by import <code>from icoscp_core.icos import data</code> used in the code
examples in this documentation.</p>
<h2 id="by-credentials-file-default">By credentials file (default)</h2>
<p>This approach should only be used on machines the developer trusts.</p>
<p>A username/password account for the <a href="https://cpauth.icos-cp.eu/">ICOS</a>
authentication service is required for this. Obfuscated (not readable by
humans) password is stored in a file on the local machine in a <strong>default
user-specific folder</strong>. To initialize this file, run the following code
interactively (only needs to be done once for every machine):</p>
<pre><code class="language-Python">from icoscp_core.icos import auth
auth.init_config_file()
</code></pre>
<p>After the initialization step is done in this way, access to the data can be
achieved using both the new <code>icoscp_core</code> machinery and the legacy
<a href="../modules/#dobj">Dobj classes</a>.</p>
<h2 id="by-custom-credentials-file">By custom credentials file</h2>
<p>The developer may wish to use a specific file to store obfuscated
credentials and token cache. In this scenario, data and
metadata access are achieved as follows:</p>
<pre><code class="language-Python">from icoscp_core.icos import bootstrap
auth, meta, data = bootstrap.fromPasswordFile(&quot;&lt;desired path to the file&gt;&quot;)
# The next line needs to be run interactively (only once per file).
auth.init_config_file()
</code></pre>
<p>If the legacy library functionality will be used, the following extra step is
needed as well:</p>
<pre><code class="language-Python">from icoscp import cpauth
cpauth.init_by(auth)
</code></pre>
<h2 id="by-authentication-token-prototyping">By authentication token (prototyping)</h2>
<p>This option is good for testing, on a public machine or in general. Its
only disadvantage is that the tokens have limited period of validity
(100'000 seconds, less than 28 hours), but this is precisely what makes
it acceptable to include them directly in the Python source code.</p>
<p>The token can be obtained from the "My Account" page (<a href="https://cpauth.icos-cp.eu/">ICOS</a>), which can be accessed by logging in
using one of the supported authentication mechanisms (username/password,
university sign-in, OAuth sign in). After this the bootstrapping can be
done as follows:</p>
<pre><code class="language-Python">from icoscp_core.icos import bootstrap
cookie_token = 'cpauthToken=WzE2OTY2NzQ5OD...'
meta, data = bootstrap.fromCookieToken(cookie_token)
</code></pre>
<p>If the legacy library functionality will be used, the following extra step is
needed as well:</p>
<pre><code class="language-Python">from icoscp import cpauth
cpauth.init_by(data.auth)
</code></pre>
<h2 id="by-explicit-credentials-advanced-option">By explicit credentials (advanced option)</h2>
<p>The user may choose to use their own mechanism of providing the
credentials to initialize the authentication. This should be considered
as an advanced option. <strong>(Please do not put your password as clear text
in your Python code!)</strong> This can be achieved as follows:</p>
<pre><code class="language-Python">from icoscp_core.icos import bootstrap
meta, data = bootstrap.fromCredentials(username_variable, password_containing_variable)
</code></pre>
<p>If the legacy library functionality will be used, the following extra step is
needed as well:</p>
<pre><code class="language-Python">from icoscp import cpauth
cpauth.init_by(data.auth)
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../install/" class="btn btn-neutral float-left" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../getting_started/" class="btn btn-neutral float-right" title="Getting started with icoscp_core">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../install/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../getting_started/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
